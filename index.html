<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" cintent="ie=edge">
    <title>Battle City</title>
</head>
<body>
    <!--1) Loader-->
    <!--2) Application-->
    <!--3) Rendering-->
    <script src="engine/DisplayObject.js"></script>
    <script src="engine/Container.js"></script>
    <script src="engine/Loader.js"></script>
    <script src="engine/Renderer.js"></script>
    <script src="engine/Sprite.js"></script>
    <script src="engine/Scene.js"></script>
    <script src="engine/Game.js"></script>
   


    <script>   
        const {Loader, Renderer, Sprite, Container, Game, Scene} = GameEngine
  /*      let sprite1 = null
        let sprite2 = null
        let container = null
        const loader = new Loader
        const renderer = new Renderer({
            width: 500,
            height: 500,
            background: 'gray',

            update (timetamp) {
                if(!sprite1 || !sprite2) {
                    return
                }
                container.rotation = timetamp / 1000
                sprite1.rotation = timetamp / 1000
                sprite2.rotation = -timetamp / 1000
                
                //sprite.x = renderer.canvas.width / 2 + 100 * Math.cos(timetamp/100)
                //sprite.y = renderer.canvas.width / 2 + 100 * Math.sin(timetamp/100)
    
               // sprite.frame.x = sprite.texture.width / 2 + 200 * Math.cos(timetamp/200)
               // sprite.frame.y = sprite.texture.width / 2 + 200 * Math.sin(timetamp/200)

               // sprite.x = renderer.canvas.width / 2 + 100 * Math.cos(timetamp/200)
               // sprite.y = renderer.canvas.width / 2 + 100 * Math.sin(timetamp/200)

    
                /*          renderer.draw((canvas, content) => {
                    content.fillStyle = 'red' 
                    content.beginPath()
                    content.arc(
                        canvas.width / 2 + 100 * Math.cos(timetamp/100), 
                        canvas.height / 2 + 100 * Math.sin(timetamp/100), 
                        10, 
                        0, 
                        Math.PI * 2
                        )
                    content.fill()
                })
            } 
        })

        document.body.append(renderer.canvas)

        loader.addImage('cola', 'static/cola.jpeg')
        loader.addJson('persons', 'static/persons.json')
      
        loader.load(() => {
            //const sprite = new Sprite(loader.getImage('hase'))
            sprite1 = new Sprite(loader.getImage('cola'), {
                x: 100,
                y: 200,
                //rotation: Math.PI / 2,
                scale:   0.25,
                anchorX: 0.5,
                anchorY: 0.5
            })

            sprite2 = new Sprite(loader.getImage('cola'), {
                x: 200,
                y: 200,
                //rotation: Math.PI / 2,
                scale:   0.25,
                anchorX: 0.5,
                anchorY: 0.5
            })
            

            //const container = new Container()
            container = new Container()
            container.x = 100
            container.y = 100
            //container.rotation = Math.PI / 4
            container.anchorX = 0.5
            container.anchorY = 0.5
            container.width = renderer.canvas.width
            container.height = renderer.canvas.height

            renderer.stage.add(container)
            container.add(sprite1)
            container.add(sprite2)

            //sprite.absoluteX = 0
            //sprite.absoluteY = 0

            //sprite.frame.x = 278
            //sprite.frame.y = 250
            //sprite.frame.width = 200
            //sprite.frame.height = 170

            //sprite.width = 200
            //sprite.height = 170

            /*sprite.x = 100
            sprite.y = 300
            sprite.width = 100
            sprite.height = 100
        }) */

 mainScene = new Scene({
                            autoStart: true,

                            loading(loader) {
                                loader.addImage('cola', 'static/cola.jpeg')
                                loader.addJson('persons', 'static/persons.json')
                            },
                            init() {
                                const colaTexture = this.parent.loader.getImage('cola')
                                this.sprite = new Sprite(colaTexture, {
                                    scale:  0.25,
                                    x:      this.parent.renderer.canvas.width / 2,
                                    y:      this.parent.renderer.canvas.height / 2

                                })
                                this.add(this.sprite)
                            },
                            update() {
                                console.log('update fired')
                            }
})

    const game = new Game({
        el: document.body,
        width: 500,
        height: 500,
        background: 'green',
        scenes: [mainScene]
    })

   </script>
</body>

</html>

